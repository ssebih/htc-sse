!function(){var e={38268:function(e,t,i){"use strict";i.r(t),i.d(t,{slides:function(){return n},slideContainer:function(){return o},slideImages:function(){return r},firstImage:function(){return s},currentImage:function(){return a},currentSlide:function(){return c},stage:function(){return d},progressBar:function(){return l},player:function(){return u},toolbar:function(){return w},getSlideSelectorByIndex:function(){return _},TOOLBAR_HEIGHT:function(){return f},SLIDE_MARGIN:function(){return h},NORMAL_IMAGE_WIDTH:function(){return g},FULLSCREEN_IMAGE_WIDTH:function(){return m}});const n=$("#new-player .slide"),o=$("#slide-container"),r=$("#new-player .slide-image"),s=r.first(),a=$("#new-player .slide.current .slide-image"),c=$("#new-player #current-slide"),d=$("#new-player #stage"),l=$("#progress-bar "),u=$("#new-player"),w=$("#player-toolbar"),_=e=>`#new-player #slide-${e}`,f=50,h=7,g=638,m=1024},86544:function(e,t,i){"use strict";i.r(t);var n=i(20923);t.default=e=>{const t={from_source:e.from_source||"/",initial_view:e.initial_view||"join",slideshow_id:e.slideshow_id,slideshow_key:e.slideshow_key,device_id:"undefined"!=typeof amplitude&&amplitude.getInstance()&&amplitude.getInstance().options?amplitude.getInstance().options.deviceId:"",download:e.isDownload,content_gate:e.isContentGate},i=new FormData;for(let[e,n]of Object.entries(t))n&&i.append(e,n);(0,n.Z)().then((e=>fetch("/scribd/authorize",{credentials:"same-origin",headers:{"X-CSRF-Token":e},method:"POST",body:i}).then((e=>e.json())).then((e=>{const t=[];for(let[i,n]of Object.entries(e.params))n&&t.push(`${encodeURIComponent(i)}=${encodeURIComponent(n)}`);const i=t.join("&"),n=`${e.url}?${i}`;window.location.href=n}))))}},14408:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return o}});var n=i(54368);function o(e,t){if(void 0===window.amplitude)return;const i={browserId:(0,n.e)("browser_id")},o=Object.assign({},t,i);window.amplitude.getInstance().logEvent(e,o)}},52871:function(e,t,i){"use strict";i.r(t),i.d(t,{getSlideshowViewEventOptions:function(){return o},logSlideshowViewed:function(){return s},initializeSlideshowEvents:function(){return c}});var n=i(14408);const o=()=>{const e=window.slideshare_object.slideshow;return{slideshow_id:e.id,slideshow_created_at:e.created_at,slideshow_category:slideshare_object.gam_cat_name,slideshow_language:e.language,slideshow_format:e.type,source:"slideshow_view"}};function r(e){const t=$.extend({},o(),{social:e});(0,n.default)("slideshow_share_interacted",t)}const s=({viewRestrictionState:e,viewRestrictionCounter:t})=>{const i=$.extend({},o(),{slideshow_num_pages:window.slideshare_object.slideshow.total_slides,view_restriction_state:e,view_restriction_counter:t});(0,n.default)("slideshow_viewed",i)},a=e=>{const t=window.slideshare_object.slideshow,i={from_slideshow_id:t.id,from_slideshow_created_at:t.created_at,from_slideshow_category:slideshare_object.gam_cat_name,from_slideshow_language:t.language,from_slideshow_format:t.type,source:"slideshow_view",to_slideshow_id:e.currentTarget.dataset.ssid,recommendation_location:e.currentTarget.dataset.trackingId,recommendation_source:e.currentTarget.dataset.sourceName,recommendation_type:e.currentTarget.dataset.recommendationType,recommendation_module_position:e.currentTarget.dataset.recommendationModulePosition};(0,n.default)("slideshow_recommendation_click",i)},c=()=>{window.addEventListener("DOMContentLoaded",(()=>{$(".facebook .share-link").click((function(){r("facebook")})),$(".twitter .share-link").click((function(){r("twitter")})),$(".linkedin .share-link").click((function(){r("linkedin")})),$(".j-share-embed").click((function(){r("embed")})),$(".wordpress-container").click((function(){r("wordpress")})),$(".share-link-container").click((function(){r("link")})),$(".slideshow-action .share").click((function(){(0,n.default)("slideshow_share_initiated",o())})),$(".clip-button-top").click((function(){(0,n.default)("slideshow_clipped",o())})),$("#mobile-clip-button").click((function(){(0,n.default)("slideshow_clipped",o())})),$(".clipping-indicator.top-clip").click((function(){(0,n.default)("slideshow_jumped_to_clip",o())})),$(".carousel-link").click(a),$(".j-related-impression").click(a)}))}},54368:function(e,t,i){"use strict";i.d(t,{e:function(){return n}});const n=e=>{if(document.cookie){const t=document.cookie.split("; ").find((t=>t.startsWith(`${e}=`)));return t?t.split("=")[1]:""}return""}},95318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},89994:function(e,t,i){"use strict";var n=i(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.trackView=t.showLimitOverlay=t.logViewRestrictionEvent=t.isRevisit=t.hideLimitOverlay=t.handleBannerNotification=t.getShouldShowReaderBlur=t.getShouldShowBannerNotificationsUX=t.getIsValidIsoDate=t.getContentGateDataFromStorage=t.CONTENT_COUNT_TO_START_RENDERING_BANNER_NOTIFICATIONS=t.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION=void 0;var o=i(63911),r=i(97695),s=n(i(14408)),a=n(i(86544)),c=i(38268);t.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION=1;const d="contentGateV3";t.CONTENT_COUNT_TO_START_RENDERING_BANNER_NOTIFICATIONS=-1;const l=()=>{let e=(0,o.loadFromStorage)(d);return Array.isArray(e.documents)||(e.documents=[]),e.documents};t.getContentGateDataFromStorage=l,t.isRevisit=e=>{const t=l(),i=t.findIndex((t=>t.id===e));return i>-1&&t[i].revisitAllowed},t.trackView=e=>{let t=l();const i=new Date((0,r.getDateNow)().getTime()-2592e6).toISOString();return t=t.filter(w).filter((e=>e.at>i)),-1===t.findIndex((t=>t.id===e))&&(t.length>=1?t.push({id:e,at:(0,r.getDateNow)(),revisitAllowed:!1}):t.push({id:e,at:(0,r.getDateNow)(),revisitAllowed:!0})),(0,o.saveToStorage)(d,{documents:t}),t.length};const u=e=>!!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/.test(e)&&new Date(e).toISOString()===e;function w(e){return!!(i=e.id)&&"string"==typeof i&&!!(t=e.at)&&u(t);var t,i}t.getIsValidIsoDate=u,t.getShouldShowBannerNotificationsUX=(e,t,i)=>e-t<=i;const _=e=>e>1;t.getShouldShowReaderBlur=_,t.logViewRestrictionEvent=e=>{const t=2===e;2===e&&(0,s.default)("view_restriction_banner_shown"),t&&(0,s.default)("view_restriction_threshold_hit")};const f=()=>{const e=window.slideshare_object,t=e&&e.slideshow;(0,a.default)({from_source:`${t.ss_url}?subscription_success_banner=show`,slideshow_id:t.id,isContentGate:!0})};t.handleBannerNotification=(e,t)=>{const i=$(".limit-notification"),n=i.find("#notification-warning-text");n.empty(),n.append(((e,t)=>{const i=t.utils;if(_(e))return i.i18n("slideshow.foundation_slideview.limit_content_without_account.notification_banner_ran_out_text")})(e,t)),i.find("#notification-warning-link").on("click",f),i.css("opacity",0).slideDown(400).animate({opacity:1},{queue:!1,duration:400})},t.showLimitOverlay=()=>{const e=$(".limit-overlay");e.find("#sign-up-with-scribd").on("click",f),e.css("display",""),c.player.addClass("guest-limit")},t.hideLimitOverlay=()=>{$(".limit-overlay").css("display","none"),c.player.removeClass("guest-limit")}},20923:function(e,t){"use strict";t.Z=async function(){const e=document.querySelector('meta[name="csrf-token"]');if(e)return e.getAttribute("content");if(null!==i)return i;let t=await fetch("/csrf_token",{credentials:"same-origin",method:"GET"});if(!t.ok)throw new Error(`csrf token http error: ${t.status}`);return t=await t.json(),i=t.csrf_token,i};let i=null},97695:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDateNow=void 0,t.getDateNow=()=>new Date},63911:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveToStorage=t.loadFromStorage=t.isLocalStorageEnabled=void 0;let i=null;const n=()=>{if(null!==i)return i;try{return window.localStorage.setItem("slideshare_test","test"),window.localStorage.removeItem("slideshare_test"),i=!0,i}catch(e){return i=!1,i}};t.isLocalStorageEnabled=n,t.loadFromStorage=e=>n()?JSON.parse(window.localStorage.getItem(e)||"{}"):null,t.saveToStorage=(e,t)=>{if(!n())return null;window.localStorage.setItem(e,JSON.stringify(t))}}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},("undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"034d216bb1e4a116b548c3db76b1fd0409414f96"},function(){"use strict";var e=i(89994),t=i(38268),n=i(63911),o=i(52871);function r(t){const i=e.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION-e.CONTENT_COUNT_TO_START_RENDERING_BANNER_NOTIFICATIONS;return t<i?"unrestricted":t>=i&&t<=e.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION?"warning":"restricted"}window.addEventListener("DOMContentLoaded",(()=>{const i=window.slideshare_object,s=i&&i.slideshow,a=function(t){if(!window.feature_flags.viewRestrictionWithoutSubscriptionAfterFive||!t)return(0,o.logSlideshowViewed)({viewRestrictionState:null,viewRestrictionCounter:null}),!1;if(!(0,n.isLocalStorageEnabled)())return(0,o.logSlideshowViewed)({viewRestrictionState:"not supported",viewRestrictionCounter:null}),!1;if(!t.view_restriction_eligible)return(0,o.logSlideshowViewed)({viewRestrictionState:"unrestricted",viewRestrictionCounter:null}),!1;if((0,e.isRevisit)(t.id)){const t=(0,e.getContentGateDataFromStorage)().length;return(0,o.logSlideshowViewed)({viewRestrictionState:"revisit",viewRestrictionCounter:t}),!1}return!0}(s);if(a){const i=(0,e.trackView)(s.id);(0,e.logViewRestrictionEvent)(i),(0,o.logSlideshowViewed)({viewRestrictionState:r(i),viewRestrictionCounter:i}),function(i){const n=window.slideshare_object,o=(0,e.getShouldShowBannerNotificationsUX)(e.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION,i,e.CONTENT_COUNT_TO_START_RENDERING_BANNER_NOTIFICATIONS),r=(0,e.getShouldShowReaderBlur)(i);o&&(0,e.handleBannerNotification)(i,n),r&&t.player.attr("data-shouldblurreader",r)}(i)}}))}()}();
//# sourceMappingURL=content-gate.602979a9dca8bee913d6.js.map